import{_ as s,c as a,o as n,Q as l}from"./chunks/framework.8adc4ca2.js";const h=JSON.parse('{"title":"应用","description":"","frontmatter":{"title":"应用","order":6},"headers":[],"relativePath":"pages/package/cli/apply.md","lastUpdated":1681395124000}'),p={name:"pages/package/cli/apply.md"},o=l(`<h1 id="应用" tabindex="-1">应用 <a class="header-anchor" href="#应用" aria-label="Permalink to &quot;应用&quot;">​</a></h1><h2 id="yalc-本地调试-node-modules" tabindex="-1">Yalc 本地调试 node_modules <a class="header-anchor" href="#yalc-本地调试-node-modules" aria-label="Permalink to &quot;Yalc 本地调试 node_modules&quot;">​</a></h2><ol><li>全局安装 yalc</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yalc</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g</span></span></code></pre></div><ol start="2"><li>在需要本地 link 的库中发布依赖。以 element-ui 为例</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">yalc</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">publish</span></span></code></pre></div><p>yalc publish 执行后，会逐一执行<code>npm 生命周期脚本</code>，如：<code>prepublish、prepare、prepublishOnly、prepack...</code>等</p><blockquote><p>通过<code>--no-script</code>禁用钩子钩动各种脚本</p></blockquote><ol start="3"><li>在项目中添加依赖</li></ol><p>以 demo 为例</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">yalc</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">element-ui</span></span></code></pre></div><blockquote><p>demo/node_modules 中 element-ui 没有丢，而是放到缓存文件中</p></blockquote><ol start="4"><li>更改 element-ui 中代码后，进行更新</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">yalc</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">publish</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--push</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 简化为：</span></span>
<span class="line"><span style="color:#FFCB6B;">yalc</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">push</span></span></code></pre></div><p>注意：</p><p>在 link 库（element-ui）中使用 yalc publish 后，还需要在项目 (demo) 里面通过 yalc update 更新。</p><p>而使用 yalc push 相当于 yalc publish + yalc update</p><p>补充命令：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 更新依赖</span></span>
<span class="line"><span style="color:#FFCB6B;">yalc</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">update</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">package_nam</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 移除 yalc 依赖</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">remove</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">package_nam</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 移除当前包所有 yalc 依赖</span></span>
<span class="line"><span style="color:#FFCB6B;">yalc</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">remove</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--all</span></span></code></pre></div><blockquote><p>参考：<a href="https://juejin.cn/post/7033400734746066957" target="_blank" rel="noreferrer">https://juejin.cn/post/7033400734746066957</a></p><p>仓库：<a href="https://github.com/wclr/yalc" target="_blank" rel="noreferrer">https://github.com/wclr/yalc</a></p></blockquote><h2 id="node-sass" tabindex="-1">node-sass <a class="header-anchor" href="#node-sass" aria-label="Permalink to &quot;node-sass&quot;">​</a></h2><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">add</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sass-loader@^10.1.1</span></span></code></pre></div><h2 id="production" tabindex="-1">production <a class="header-anchor" href="#production" aria-label="Permalink to &quot;production&quot;">​</a></h2><p>如果 production 为 true 将不会安装 开发依赖</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">production</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">production</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false</span></span></code></pre></div><h2 id="requesterror" tabindex="-1">RequestError <a class="header-anchor" href="#requesterror" aria-label="Permalink to &quot;RequestError&quot;">​</a></h2><p>connect ETIMEDOUT 20.205.243.166:443</p><ol><li>cmd 中 ping github.com ，是否能够正常连接</li><li>不能正常连接，在 <code>C:\\Windows\\System32\\drivers\\etc</code>目录下 host 文件下添加</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">140.82.114.3 github.com</span></span></code></pre></div><blockquote><p>140.82.114.3 获取：在 <a href="https://ipaddress.com/" target="_blank" rel="noreferrer">https://ipaddress.com/</a> 中，搜索 github.com</p></blockquote><h2 id="配置代理" tabindex="-1">配置代理 <a class="header-anchor" href="#配置代理" aria-label="Permalink to &quot;配置代理&quot;">​</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">## cmd 配置临时代理</span></span>
<span class="line"><span style="color:#82AAFF;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http_proxy=http://127.0.0.1:</span><span style="color:#F78C6C;">1080</span></span>
<span class="line"><span style="color:#82AAFF;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https_proxy=http://127.0.0.1:</span><span style="color:#F78C6C;">1080</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## 查看配置状态</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> %http_proxy%</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## powershell 设置代理</span></span>
<span class="line"><span style="color:#FFCB6B;">netsh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">winhttp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">proxy</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">127.0.0.1:1080</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#FFCB6B;">netsh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">winhttp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">reset</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">proxy</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## 查看代理</span></span>
<span class="line"><span style="color:#FFCB6B;">netsh</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">winhttp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">show</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">proxy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## git 配置局部代理</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http.proxy</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://127.0.0.1:</span><span style="color:#F78C6C;">1080</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https.proxy</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://127.0.0.1:</span><span style="color:#F78C6C;">1080</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http.proxy</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">socks5://127.0.0.1:</span><span style="color:#F78C6C;">1080</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https.proxy</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">socks5://127.0.0.1:</span><span style="color:#F78C6C;">1080</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## 只对github生效</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--global</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http.https://github.com.proxy</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">socks5://127.0.0.1:</span><span style="color:#F78C6C;">1080</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--global</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--unset</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http.https://github.com.proxy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## 删除局部代理</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--unset</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http.proxy</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--unset</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https.proxy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## npm 配置代理</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">proxy</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://127.0.0.1:</span><span style="color:#F78C6C;">1080</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https-proxy</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://127.0.0.1:</span><span style="color:#F78C6C;">1080</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">delete</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">proxy</span></span>
<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">delete</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https-proxy</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## 查看状态</span></span>
<span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--list</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## yarn 代理</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">list</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">proxy</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://127.0.0.1:</span><span style="color:#F78C6C;">1080</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https-proxy</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://127.0.0.1:</span><span style="color:#F78C6C;">1080</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">delete</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">proxy</span></span>
<span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">delete</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https-proxy</span></span></code></pre></div>`,32),e=[o];function t(c,r,C,y,i,D){return n(),a("div",null,e)}const d=s(p,[["render",t]]);export{h as __pageData,d as default};
